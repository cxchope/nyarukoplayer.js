var nyarukoplayer_conffile="",nyarukoplayer_consolelog=!0,nyarukoplayer_cnlrc=!0,nyarukoplayer_lrctime=0,nyarukoplayer_titlelrc=!1,nyarukoplayer_imgtype="",nyarukoplayer_webp=!0,nyarukoplayer_imgdir="",nyarukoplayer_musicbtnimg="",nyarukoplayer_lrcfile="",nyarukoplayer_musicfile="",nyarukoplayer_musicblock="",nyarukoplayer_replay=!0,nyarukoplayerCallback_AnimateStart=null,nyarukoplayerCallback_AnimateEnd=null,nyarukoplayerCallback_LyricEnd=null,nyarukoplayerCallback_ConfigurationLoaded=null,nyarukoplayerCallback_ImageLoaded=
null,nyarukoplayerCallback_LyricsLoaded=null,nyarukoplayerCallback_MusicLanguageblock=null,nyarukoplayerCallback_MusicDisabled=null,nyarukoplayerCallback_Error=null,nyarukoplayerCallback_MusicPlay=null,nyarukoplayerCallback_MusicPause=null,nyarukoplayerCallback_AnimateReady=null,nyarukoplayer_imgcache=[],nyarukoplayer_from=[],nyarukoplayer_to=[],nyarukoplayer_width=[],nyarukoplayer_height=[],nyarukoplayer_time=[],nyarukoplayer_count=0,nyarukoplayer_loaded=0,nyarukoplayer_now=0,nyarukoplayer_lrcoldtime=
0,nyarukoplayer_lrc=null,nyarukoplayer_webpok=!1,nyarukoplayer_lrctimer=null,nyarukoplayer_lrctimers="",nyarukoplayer_lrctimeri=0,nyarukoplayer_autoplay=!0,nyarukoplayer_musicready=!1,nyarukoplayer_waitload=!1,nyarukoplayer_playd=!1,nyarukoplayer_retaincount=0;
function nyarukoplayer_init(a,c){nyarukoplayer_conffile=a;if(nyarukoplayer_consolelog=void 0===c?!0:c)console.log("[nyarukoplayer.js] v2.0\nPowered by KagurazakaYashi"),console.log("[NyarukoPlayer] Downloading configuration...");try{$.getJSON(nyarukoplayer_conffile,function(a,b,c,d){"error"==b&&(nyarukoplayer_consolelog&&console.error("[NyarukoPlayer] Download configuration failed. "+c.status+": "+c.statusText),nyarukoplayer_error());"success"==b&&(a=c.responseJSON,b=a[0],nyarukoplayer_cnlrc=b.cnlrc,
nyarukoplayer_lrctime=b.lrctime,nyarukoplayer_titlelrc=b.titlelrc,nyarukoplayer_imgtype=b.imgtype,nyarukoplayer_webp=b.webp,nyarukoplayer_imgdir=b.imgdir,nyarukoplayer_musicbtnimg=b.musicbtnimg,nyarukoplayer_lrcfile=b.lrcfile,nyarukoplayer_musicfile=b.musicfile,nyarukoplayer_musicblock=b.musicblock,nyarukoplayer_replay=b.replay,nyarukoplayer_autoplay=b.autoplay,a=a[1],datdatacount=a.length,nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Download configuration. "+datdatacount+": "+c.status+
": "+c.statusText),nyarukoplayer_animationinit(a))})}catch(l){nyarukoplayer_consolelog&&console.error("Data loading failed: "+l),nyarukoplayer_error()}}
function nyarukoplayer_animationinit(a){$.ajaxSetup({error:function(a,b){nyarukoplayer_consolelog&&console.error("Data loading failed: "+b);nyarukoplayer_error();return!1}});var c=nyarukoplayer_browserok();null!=c?nyarukoplayer_error(c):(nyarukoplayer_webpok=nyarukoplayer_checkWebpSupport(),"true"==$.cookie("disable")?(nyarukoplayer_consolelog&&console.warn("[NyarukoPlayer] Disabled by cookie."),$("#nyarukoplayer_loading").remove(),$("#titlebox").css("background","transparent")):(nyarukoplayer_count=
a.length,nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Configuration loaded."),$.isFunction(nyarukoplayerCallback_ConfigurationLoaded)&&nyarukoplayerCallback_ConfigurationLoaded(),nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Loading images..."),$.each(a,function(a,b){nyarukoplayer_webp&&nyarukoplayer_webpok&&(nyarukoplayer_imgtype="webp");imgurl=nyarukoplayer_imgdir+b[0]+"."+nyarukoplayer_imgtype;nyarukoplayer_width[a]=b[1];nyarukoplayer_height[a]=b[2];nyarukoplayer_from[a]=b[3];
nyarukoplayer_to[a]=b[4];nyarukoplayer_time[a]=b[5];nimg=new Image;nimg.src=imgurl;nimg.onload=function(){nyarukoplayer_imgcache[a]=$(this);nyarukoplayer_loaded++;var b=nyarukoplayer_loaded/nyarukoplayer_count*100;nyarukoplayer_consolelog&&console.log("Loading... "+nyarukoplayer_loaded+"/"+nyarukoplayer_count+" : "+b+"%");var c=$("#nyarukoplayer_loadingok");c.html("\u8f7d\u5165\u4e2d "+b.toFixed(0)+"%");c.css("width",b+"%");nyarukoplayer_loaded==nyarukoplayer_count&&(nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Image Loaded."),
$.isFunction(nyarukoplayerCallback_ImageLoaded)&&nyarukoplayerCallback_ImageLoaded(),0!=$("#nyarukoplayer_audiodiv").length&&0!=$("#nyarukoplayer_musiccontrol")?($("#nyarukoplayer_audiodiv").css("background","url('"+nyarukoplayer_musicbtnimg+"') no-repeat"),nyarukoplayer_autoplay?nyarukoplayer_musicdiglog_open():nyarukoplayer_musicready=!0):(nyarukoplayer_consolelog&&console.error("[NyarukoPlayer] \u6ca1\u6709\u5bfc\u5165\u76f8\u5173 div \u6216 \u64ad\u653e\u5730\u533a/\u8bed\u8a00\u9650\u5236\uff0c\u65e0\u6cd5\u64ad\u653e\u97f3\u9891\u3002"),
nyarukoplayer_ready()),nyarukoplayer_preplay(),nyarukoplayer_waitload&&nyarukoplayer_playnow(!1))};nimg.onerror=function(){nyarukoplayer_consolelog&&console.error("[NyarukoPlayer] Picture loading failed");nyarukoplayer_error()}}),nyarukoplayer_lrcfile&&(nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Downloading lyric..."),$.ajax({url:nyarukoplayer_lrcfile,dataType:"text",success:function(a){nyarukoplayer_audioinit(a)}})),$(window).resize(function(){nyarukoplayer_resizeendimg()})))}
function nyarukoplayer_playnow(a){nyarukoplayer_cplaynow=void 0===a?!0:a;if(0==nyarukoplayer_loaded||nyarukoplayer_loaded!=nyarukoplayer_count)return nyarukoplayer_waitload=!0,!1;if(nyarukoplayer_autoplay||nyarukoplayer_musicready)if(3!=nyarukoplayer_musicdiglog_open()){if(nyarukoplayer_playd){nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Has started, no need to start again.");return}nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Image Play.");nyarukoplayer_playd=!0;nyarukoplayer_play()}else nyarukoplayer_autoplay=
!0;$.isFunction(nyarukoplayerCallback_AnimateStart)&&nyarukoplayerCallback_AnimateStart();return!0}function nyarukoplayer_preplay(){$("#nyarukoplayer_loading").remove();nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Ready.");$.isFunction(nyarukoplayerCallback_AnimateReady)&&nyarukoplayerCallback_AnimateReady(nyarukoplayer_autoplay)}
function nyarukoplayer_ready(){0!=$("#nyarukoplayer")?nyarukoplayer_autoplay&&nyarukoplayer_playnow(!1):(nyarukoplayer_consolelog&&console.error("[NyarukoPlayer] Unable to play animation without importing related div."),$("#titlebox").css("background","transparent"))}
function nyarukoplayer_playmusic(a){nyarukoplayer_playd&&nyarukoplayer_cplaynow?nyarukoplayer_cplaynow=!1:a?document.getElementById("nyarukoplayer_musiccontrol").paused&&(nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Music Play."),$("#nyarukoplayer_audiodiv").css("animation","change 2s linear infinite"),document.getElementById("nyarukoplayer_musiccontrol").play(),$.isFunction(nyarukoplayerCallback_MusicPlay)&&nyarukoplayerCallback_MusicPlay()):document.getElementById("nyarukoplayer_musiccontrol").paused||
(nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Music Pause."),$("#nyarukoplayer_audiodiv").css("animation","none"),document.getElementById("nyarukoplayer_musiccontrol").pause(),$.isFunction(nyarukoplayerCallback_MusicPause)&&nyarukoplayerCallback_MusicPause())}
function nyarukoplayer_error(a){a=void 0===a?"\u4e00\u4e9b\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u5237\u65b0\u518d\u8bd5\u3002":a;$("#nyarukoplayer_loadingok").css({width:"100%","background-color":"#FF0033",background:"linear-gradient(#FF6666, #FF0033)","text-align":"center"});$("#nyarukoplayer_loadingok").html(a);$("#titlebox").css("background","transparent");$.isFunction(nyarukoplayerCallback_Error)&&nyarukoplayerCallback_Error(a)}
function nyarukoplayer_play(a){if(void 0===a||!a)if(0==nyarukoplayer_retaincount)nyarukoplayer_retaincount++;else return;var c=document.body.clientWidth,l=document.body.clientHeight;$("#nyarukoplayer").append('<div class="nyarukodiv"></div>');var b=$(".nyarukodiv"),f=nyarukoplayer_width[nyarukoplayer_now],d=nyarukoplayer_height[nyarukoplayer_now];b.append(nyarukoplayer_imgcache[nyarukoplayer_now]);var g=nyarukoplayer_to[nyarukoplayer_now];a=1E3*nyarukoplayer_time[nyarukoplayer_now];var e=nyarukoplayer_frame(nyarukoplayer_from[nyarukoplayer_now],
f,d,c,l),c=nyarukoplayer_frame(g,f,d,c,l);b.css({left:e[0],top:e[1],width:e[2],height:e[3]});b.animate({left:c[0],top:c[1],width:c[2],height:c[3]},a,function(){nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] IMG "+(nyarukoplayer_now+1)+"/"+nyarukoplayer_count);nyarukoplayer_now<nyarukoplayer_count-1?(nyarukoplayer_now++,b.remove(),nyarukoplayer_play(!0)):(nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Animate End."),$.isFunction(nyarukoplayerCallback_AnimateEnd)&&nyarukoplayerCallback_AnimateEnd(),
nyarukoplayer_replay&&(nyarukoplayer_now=0,b.remove(),nyarukoplayer_play(!0)))})}
function nyarukoplayer_frame(a,c,l,b,f){$("#nyarukoplayer").css({width:b,height:f});var d=0,g=0,e=0,k=0,m=c/l;"L"==a?(d=0,e=m*f,e<b&&(e=b),k=e/m,g=(f-k)/2):"R"==a?(e=m*f,e<b&&(e=b),d=b-e,k=e/m,g=(f-k)/2):"U"==a?(g=0,k=b/m,k<f&&(k=f),e=k*m,d=(b-e)/2):"D"==a?(k=b/m,k<f&&(k=f),e=k*m,g=f-k,d=(b-e)/2):"C"==a?(a=nyarukoplayer_imgcenter(c,l,b,f),d=a[0],g=a[1],e=a[2],k=a[3]):"B"==a&&(b-c>f-l?(e=1.2*b,k=e/m):(k=1.2*f,e=k*m),d=(b-e)/2,g=(f-k)/2);nyarukoplayer_consolelog&&console.log(d+","+g+","+e+","+k+","+
m);return[d,g,e,k]}function nyarukoplayer_resizeendimg(){var a=$(window).width(),c=$(window).height(),a=nyarukoplayer_imgcenter(nyarukoplayer_width[nyarukoplayer_now],nyarukoplayer_height[nyarukoplayer_now],a,c);x=a[0];y=a[1];w=a[2];h=a[3];$(".nyarukodiv").css({left:x,top:y,width:w,height:h})}
function nyarukoplayer_imgcenter(a,c,l,b){var f=0,d=0,g,e=a/c;a=l-a;var k=b-c,m=a/k;a>k?(c=l,g=c/e,d=(b-g)/2):(g=b,c=g*e,f=(l-c)/2);1<e?1.01<m&&m<e&&(a<k?(c=l,g=c/e,d=(b-g)/2,f=0):(g=b,c=g*e,f=(l-c)/2,d=0)):m>e&&1>m&&(a<k?(c=l,g=c/e,d=(b-g)/2,f=0):(g=b,c=g*e,f=(l-c)/2,d=0));return[f,d,c,g]}
function nyarukoplayer_audioinit(a){if("true"==$.cookie("disable"))nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Disabled by user."),$.isFunction(nyarukoplayerCallback_MusicDisabled)&&nyarukoplayerCallback_MusicDisabled();else{if(""!=nyarukoplayer_musicblock&&"true"!=$.cookie("nochkarea"))for(var c=navigator.language.substr(0,2),l=nyarukoplayer_musicblock.split("|"),b=0;b<l.length;b++)if(l[b]==c){nyarukoplayer_consolelog&&console.warn("[NyarukoPlayer] \u3053\u306e\u30da\u30fc\u30b8\u306f\u304a\u4f4f\u307e\u3044\u306e\u5730\u57df\u304b\u3089\u3054\u5229\u7528\u306b\u306a\u308c\u307e\u305b\u3093 Cannot use this page from the area to live");
$("#nyarukoplayer_audiodiv").remove();$.isFunction(nyarukoplayerCallback_MusicLanguageblock)&&nyarukoplayerCallback_MusicLanguageblock();return}$("#nyarukoplayer_musiccontrol").html('<source src="'+nyarukoplayer_musicfile+'" />');l=document.getElementById("nyarukoplayer_musiccontrol");c=$("#nyarukoplayer_audiodiv");l.load();l.pause();c.click(function(){document.getElementById("nyarukoplayer_musiccontrol").paused?nyarukoplayer_playmusic(!0):(nyarukoplayer_playmusic(!1),$("#nyarukoplayer_lrc").html(""))});
if(a){a=a.split("\n");for(var f=/\[\d{2}:\d{2}.\d{2}\]/g,d=[];!f.test(a[0]);)lineslines=a.slice(1);0===a[a.length-1].length&&a.pop();a.forEach(function(a,b,c){b=a.match(f);var e=a.replace(f,"");b.forEach(function(a,b,c){a=a.slice(1,-1).split(":");d.push([60*parseInt(a[0],10)+parseFloat(a[1]),e])})});a=0;for(var c=d.length,g;a<c;a++)for(b=0;b<c;b++)d[a][0]<d[b][0]&&(g=d[b],d[b]=d[a],d[a]=g);nyarukoplayer_lrc=[];for(b=0;b<d.length;b++)c=d[b][1],c=""==c?["",""]:c.split("|"),nyarukoplayer_lrc[b]=[d[b][0]+
nyarukoplayer_lrctime,c[0],c[1]];l.ontimeupdate=function(){for(var a=0,b=nyarukoplayer_lrc.length;a<b;a++){if(-1==nyarukoplayer_lrcoldtime)if(1>this.currentTime)nyarukoplayer_lrcoldtime=0;else break;var c=nyarukoplayer_lrc[a][0];if(this.currentTime>c&&nyarukoplayer_lrcoldtime<c){nyarukoplayer_lrcoldtime=this.currentTime;var d="",d=nyarukoplayer_cnlrc&&nyarukoplayer_lrc[a][2]?nyarukoplayer_lrc[a][2]:nyarukoplayer_lrc[a][1];"END"==d&&(d="",nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Lyric End."),
nyarukoplayer_lrcoldtime=-1,$.isFunction(nyarukoplayerCallback_LyricEnd)&&nyarukoplayerCallback_LyricEnd());if($("#nyarukoplayer_lrc").html()!=d){nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] LRC "+a+"/"+b+"|"+this.currentTime+"/"+c);var f=$("#nyarukoplayer_lrc");document.hidden?f.text(d):f.fadeTo(200,0,function(){nyarukoplayer_lrctimers=d;f.text("");nyarukoplayer_lrctimer=setInterval(function(){document.getElementById("nyarukoplayer_musiccontrol").paused?(clearInterval(nyarukoplayer_lrctimer),
nyarukoplayer_lrctimeri=0,nyarukoplayer_lrctimers=""):(f.append(nyarukoplayer_lrctimers.charAt(nyarukoplayer_lrctimeri)),nyarukoplayer_lrctimeri++===nyarukoplayer_lrctimers.length&&(clearInterval(nyarukoplayer_lrctimer),nyarukoplayer_lrctimeri=0))},100);f.fadeTo(0,1,null)});nyarukoplayer_titlelrc&&(document.title="\u266a"+d)}break}}};$("#nyarukoplayer_lrc").click(function(){(nyarukoplayer_cnlrc=!nyarukoplayer_cnlrc)?$(this).html("(\u5207\u6362\u4e3a\u4e2d\u6587\u6b4c\u8bcd...)"):$(this).html("(\u5207\u6362\u4e3a\u539f\u7248\u6b4c\u8bcd...)")});
nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Lyrics loaded.");$.isFunction(nyarukoplayerCallback_LyricsLoaded)&&nyarukoplayerCallback_LyricsLoaded()}}}function nyarukoplayer_nochkarea(a){$.cookie("nochkarea",void 0===a?!1:a,{expires:365});location.reload(!1)}function nyarukoplayer_disable(a){$.cookie("disable",void 0===a?!1:a,{expires:365});location.reload(!1)}
function nyarukoplayer_musicdiglog_close(){$("#nyarukoplayer_musicdiglog").animate({left:"200%"},1E3,function(){$("#nyarukoplayer_musicdiglog").remove()})}
function nyarukoplayer_musicdiglog_open(){if(0!=$("#nyarukoplayer_musicdiglog").length||nyarukoplayer_playd)return-1;var a=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(a||"1"!=$.cookie("playmusic")){if(a||"2"!=$.cookie("playmusic")){var c='<div id="nyarukoplayer_musicdiglog"><h1>\u8981\u5f00\u542f\u80cc\u666f\u97f3\u4e50\u5417\uff1f</h1><p><a id="nyarukoplayer_musicdiglog_yes">\u64ad\u653e(\u63a8\u8350)</a></p><p><a id="nyarukoplayer_musicdiglog_no">\u4e0d\u8981\u64ad\u653e</a></p>';a||
(c+='<p><input type="checkbox" id="nyarukoplayer_musicdiglog_save" value="1" checked="checked" />\u4eca\u65e5\u4e0d\u518d\u8be2\u95ee</p>');c+="</div>";$("body").append(c);$("#nyarukoplayer_musicdiglog_yes").click(function(){!a&&$("#nyarukoplayer_musicdiglog_save").prop("checked")&&$.cookie("playmusic","1",{expires:1});nyarukoplayer_playmusic(!0);nyarukoplayer_musicdiglog_close();nyarukoplayer_ready();nyarukoplayer_play()});$("#nyarukoplayer_musicdiglog_no").click(function(){!a&&$("#nyarukoplayer_musicdiglog_save").prop("checked")&&
$.cookie("playmusic","2",{expires:1});nyarukoplayer_musicdiglog_close();nyarukoplayer_ready();nyarukoplayer_play()});return 3}nyarukoplayer_musicdiglog_close();nyarukoplayer_ready();return 2}nyarukoplayer_playmusic(!0);nyarukoplayer_musicdiglog_close();nyarukoplayer_ready();return 1}function nyarukoplayer_checkWebpSupport(){var a=document.createElement("canvas");return a.getContext&&a.getContext("2d")?0===a.toDataURL("image/webp").indexOf("data:image/webp"):!1}
function nyarukoplayer_browserok(){var a=navigator.userAgent.toLowerCase(),c="";/ie/.test(a)&&(c="IE");/opera/.test(a)&&(c="Opera");return""==c?null:"\u62b1\u6b49,\u6682\u4e0d\u652f\u6301"+c+",\u5efa\u8bae\u4f7f\u7528\u6700\u65b0\u7248Chrome\u3002"};
